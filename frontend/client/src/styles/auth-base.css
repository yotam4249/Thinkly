@import "./ui.css";

/* =========================================================
   AUTH BASE (scoped to .auth-screen to avoid ui.css clashes)
   ========================================================= */

/* Full-screen background for auth pages */
.auth-screen {
  width: 100vw;
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;

  /* soft multi-layer gradient */
  background:
    radial-gradient(circle at 20% 20%, rgba(255, 245, 255, 1) 0%, transparent 60%),
    radial-gradient(circle at 80% 30%, rgba(236, 248, 255, 1) 0%, transparent 70%),
    linear-gradient(135deg, #f6fff8 0%, #f1f0ff 45%, #fff7ff 80%, #f5faff 100%);
  background-attachment: fixed;

  overflow: hidden;
  padding: 32px;

  /* isolate z-index/stacking for widgets inside (tooltips, etc.) */
  isolation: isolate;
}

/* Decorative blobs */
.auth-screen .auth-blob {
  position: absolute;
  width: 70vmin;
  height: 70vmin;
  border-radius: 50%;
  filter: blur(80px);
  opacity: 0.4;
  pointer-events: none;
  animation: floatBlob 20s ease-in-out infinite alternate;
}
.auth-screen .auth-blob:nth-child(1) { background: rgba(108, 99, 255, 0.2); top: -10%; left: -10%; }
.auth-screen .auth-blob:nth-child(2) { background: rgba(0, 184, 148, 0.15); bottom: -15%; right: -10%; }
.auth-screen .auth-blob:nth-child(3) { background: rgba(255, 200, 150, 0.2); top: 60%; left: 70%; }

@keyframes floatBlob {
  0%   { transform: translate(0, 0) scale(1); }
  100% { transform: translate(5%, -5%) scale(1.1); }
}

/* ===================== Split Card ===================== */
.auth-screen .auth-card {
  width: var(--card-width);
  background: color-mix(in oklab, var(--surface) 90%, transparent);
  backdrop-filter: blur(8px);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow);
  display: grid;
  grid-template-columns: 1.1fr minmax(320px, var(--pane-width));
  overflow: hidden;
}
@media (max-width: 980px) {
  .auth-screen .auth-card {
    grid-template-columns: 1fr; /* collapse to single column */
    width: min(96vw, 560px);
  }
}

/* Left visual pane */
.auth-screen .visual-pane {
  position: relative;
  background:
    radial-gradient(1200px 500px at 0% 0%, var(--brand-weak), transparent 60%),
    linear-gradient(180deg, color-mix(in oklab, var(--brand-weak) 30%, transparent), transparent 60%),
    var(--surface);
  padding: 40px 36px;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.auth-screen .visual-badge {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  border-radius: 999px;
  background: var(--brand-weak);
  color: var(--text);
  font-weight: 700;
  width: fit-content;
  margin-bottom: 14px;
}

.auth-screen .visual-title {
  font-size: clamp(22px, 2.2vw, 28px);
  font-weight: 800;
  letter-spacing: -0.02em;
  color: var(--text);
  margin: 0 0 8px 0;
}

.auth-screen .visual-copy {
  color: var(--muted);
  font-size: clamp(14px, 1.5vw, 16px);
  max-width: 38ch;
}

.auth-screen .brand-mark {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  color: var(--muted);
  font-weight: 700;
  font-size: 12px;
  margin-top: 20px;
  opacity: .9;
}
.auth-screen .brand-mark-dot {
  width: 8px;
  height: 8px;
  border-radius: 99px;
  background: var(--brand);
}

/* Right form pane */
.auth-screen .form-pane {
  padding: clamp(22px, 2.2vw, 28px);
  background: var(--surface);
}

/* Titles */
.auth-screen .form-header { text-align: center; margin-bottom: 10px; }

.auth-screen .brand-dot {
  width: 12px; height: 12px; border-radius: 999px;
  background: var(--brand);
  margin: 0 auto 10px;
}
.auth-screen .auth-heading {
  text-align: center;
  margin: 0 0 6px 0;
  color: var(--text);
  font-size: clamp(22px, 2.2vw, 26px);
  font-weight: 900;
  letter-spacing: -0.02em;
}
.auth-screen .auth-subheading {
  text-align: center;
  margin: 0 0 4px 0;
  color: var(--muted);
  font-size: clamp(12px, 1.3vw, 14px);
}

/* ===================== Inputs (scoped & stabilized) ===================== */
.auth-screen .auth-label {
  display: block;
  font-size: 13px;
  color: var(--muted);
  margin: 14px 0 6px;
}

.auth-screen .auth-input-wrapper {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
}

/* Final, high-specificity rules so ui.css can't override */
.auth-screen .auth-input-wrapper .auth-input,
.auth-screen .auth-input {
  box-sizing: border-box;
  width: 100%;
  padding: 12px 12px;
  padding-right: 44px;          /* room for right-side icons (eye/calendar) */
  background: var(--surface);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 10px;          /* matches ui.css .input radius */
  outline: none;
  font-size: 15px;
  transition: border-color .16s ease, box-shadow .16s ease, transform .05s ease;
}

/* Placeholder color tuned for both themes */
.auth-screen .auth-input::placeholder {
  color: color-mix(in oklab, var(--muted) 90%, transparent);
}

/* Focus ring uses per-page brand (login: violet / register: green) */
.auth-screen .auth-input:focus,
.auth-screen .auth-input:focus-visible {
  border-color: var(--brand);
  box-shadow: 0 0 0 4px var(--brand-weak);
}

/* Keep username visually aligned with password input width */
.auth-screen #username.auth-input { padding-right: 44px; }

/* Error state (ARIA-compatible) */
.auth-screen .auth-input[aria-invalid="true"] {
  border-color: #ef4444;
  box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.12);
}

/* Password toggle inside input */
.auth-screen .pw-toggle-inside {
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  background: transparent;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 4px;
  color: #6b7280;
  opacity: 0.9;
  z-index: 1;
  transition: color .2s ease, opacity .2s ease;
}
.auth-screen .pw-toggle-inside:hover { color: #10b981; opacity: 1; }
.auth-screen .pw-toggle-inside:focus { outline: none; color: var(--brand); opacity: 1; }
.auth-screen .pw-icon { width: 20px; height: 20px; stroke: currentColor; fill: none; pointer-events: none; }

/* ===================== Date Input (register) ===================== */
.auth-screen .date-input { position: relative; }
.auth-screen .date-input .auth-input[type="date"] { padding-right: 44px; }

/* Custom calendar glyph on the right (visual only) */
.auth-screen .date-input::after {
  content: "";
  position: absolute;
  right: 12px;
  top: 50%;
  width: 20px;
  height: 20px;
  transform: translateY(-50%);
  pointer-events: none; /* native indicator remains clickable behind */
  opacity: 0.85;
  background-repeat: no-repeat;
  background-position: center;
  background-size: 20px 20px;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' stroke='%236b7080' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='3' y='4' width='18' height='18' rx='2' ry='2'/%3E%3Cline x1='16' y1='2' x2='16' y2='6'/%3E%3Cline x1='8' y1='2' x2='8' y2='6'/%3E%3Cline x1='3' y1='10' x2='21' y2='10'/%3E%3C/svg%3E");
}

/* Make the native WebKit date indicator invisible but clickable */
.auth-screen .date-input .auth-input[type="date"]::-webkit-calendar-picker-indicator {
  opacity: 0;
  display: block;
  width: 32px;
  height: 32px;
  margin: 0;
  position: absolute;
  right: 6px;
  top: 50%;
  transform: translateY(-50%);
  cursor: pointer;
}

/* Remove extra adornments where applicable */
.auth-screen .date-input .auth-input[type="date"]::-webkit-inner-spin-button,
.auth-screen .date-input .auth-input[type="date"]::-webkit-clear-button {
  display: none;
}

/* ===================== Feedback text ===================== */
.auth-screen .auth-msg {
  margin-top: 14px;
  font-size: 13px;
  color: var(--text);
}

/* ===================== Buttons (auth flavor) ===================== */
.auth-screen .btn-primary {
  margin-top: 18px;
  width: 100%;
  padding: 12px 14px;
  border: none;
  border-radius: var(--radius-md);
  background: var(--brand);
  color: #fff;
  font-weight: 800;
  font-size: 15px;
  letter-spacing: .01em;
  cursor: pointer;
  box-shadow: 0 10px 24px color-mix(in oklab, var(--brand) 35%, transparent);
  transition: transform .14s ease, box-shadow .14s ease, opacity .14s ease;
}
.auth-screen .btn-primary:hover:not(:disabled) { transform: translateY(-1px); }
.auth-screen .btn-primary:disabled { opacity: .65; cursor: default; box-shadow: none; }

.auth-screen .btn-row {
  display: flex;
  justify-content: center;
  margin-top: 12px;
}
.auth-screen .btn-ghost {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  border-radius: var(--radius-md);
  border: 1px dashed var(--border);
  color: var(--text);
  text-decoration: none;
  font-weight: 700;
  transition: background .12s ease, border-color .12s ease;
}
.auth-screen .btn-ghost:hover {
  background: color-mix(in oklab, var(--brand-weak) 40%, transparent);
  border-color: color-mix(in oklab, var(--brand) 30%, var(--border));
}
